name: Maintenance Workflow
on:
  push:
    branches:
      - main

jobs:
  copy-workflows:
    name: Copy workflows to templates
    runs-on: ubuntu-latest

    steps:
      - uses: actions/checkout@v3

      - run: cp .github/workflows/pull-request.yml templates/github/workflows/
      - run: cp .github/workflows/workflow.yml templates/github/workflows/

      - name: Create Pull Request
        uses: peter-evans/create-pull-request@v4
        with:
          commit-message: 'chore(deps): update github actions workflows'
          author: Bjerk Bot <bjerk-bot@users.noreply.github.com>
          token: ${{ secrets.BJERKBOT_GITHUB_TOKEN }}
          branch: update-workflows
          team-reviewers: thebranches
          delete-branch: true
          title: 'chore(deps): update github actions workflows'
          body: |
            This pull request updates workflows from main .github directory.

            Reason for this update is probably because Dependabot has updated
            either pull-request.yml or workflow.yml. We synchronize these files
            from the main .github directory to template directory to keep them
            up-to-date.
